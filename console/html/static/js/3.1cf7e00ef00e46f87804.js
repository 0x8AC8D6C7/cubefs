webpackJsonp([3],{"181+":function(e,t,a){"use strict";var s=a("x11r"),i=a.n(s),o=a("6KKH"),n=a.n(o),r=i()(["query dataNodeListTest($num:int64) {\n    dataNodeListTest(num:$num){\n      addr\n      availableSpace\n      #      badDisks\n      carry\n      dataPartitionCount\n      #      dataPartitionReports\n      iD\n      nodeSetID\n      #      persistenceDataPartitions\n      reportTime\n      selectedTimes\n      total\n      usageRatio\n      used\n      zoneName\n    }\n  }"],["query dataNodeListTest($num:int64) {\n    dataNodeListTest(num:$num){\n      addr\n      availableSpace\n      #      badDisks\n      carry\n      dataPartitionCount\n      #      dataPartitionReports\n      iD\n      nodeSetID\n      #      persistenceDataPartitions\n      reportTime\n      selectedTimes\n      total\n      usageRatio\n      used\n      zoneName\n    }\n  }"]),l=i()(["query clusterView {\n    clusterView {\n      name\n      dataNodes {\n        addr\n        reportDisks\n        status\n        toDataNode {\n          zoneName\n          used\n          total\n          usageRatio\n          badDisks\n        }\n      },\n      metaNodes {\n        addr\n        status\n        toMetaNode {\n          zoneName\n          used\n          total\n          ratio\n        }\n      }\n    }\n  }"],["query clusterView {\n    clusterView {\n      name\n      dataNodes {\n        addr\n        reportDisks\n        status\n        toDataNode {\n          zoneName\n          used\n          total\n          usageRatio\n          badDisks\n        }\n      },\n      metaNodes {\n        addr\n        status\n        toMetaNode {\n          zoneName\n          used\n          total\n          ratio\n        }\n      }\n    }\n  }"]),c=i()(["query listVolume ($keyword:String, $userID:String) {\n      listVolume (keyword:$keyword, userID:$userID) {\n        name\n        capacity\n        occupied\n        dpReplicaNum\n        owner\n        createTime\n        oSSAccessKey\n        oSSSecretKey\n        toSimpleVolView {\n          description\n          dpCnt\n          mpCnt\n          rwDpCnt\n        }\n        status\n      }\n    }"],["query listVolume ($keyword:String, $userID:String) {\n      listVolume (keyword:$keyword, userID:$userID) {\n        name\n        capacity\n        occupied\n        dpReplicaNum\n        owner\n        createTime\n        oSSAccessKey\n        oSSSecretKey\n        toSimpleVolView {\n          description\n          dpCnt\n          mpCnt\n          rwDpCnt\n        }\n        status\n      }\n    }"]),m=i()(["mutation createVolume($authenticate:Bool, $capacity:Uint64, $crossZone:Bool, $dataPartitionSize:Uint64, $dpReplicaNum:Uint64, $enableToken:Bool, $followerRead:Bool, $mpCount:Uint64, $name:String, $owner:String, $zoneName:String, $description:String) {\n      createVolume(authenticate:$authenticate, capacity:$capacity, crossZone:$crossZone, dataPartitionSize:$dataPartitionSize, dpReplicaNum:$dpReplicaNum, enableToken:$enableToken, followerRead:$followerRead, mpCount:$mpCount, name:$name, owner:$owner, zoneName:$zoneName, description:$description){\n        name\n      }\n    }"],["mutation createVolume($authenticate:Bool, $capacity:Uint64, $crossZone:Bool, $dataPartitionSize:Uint64, $dpReplicaNum:Uint64, $enableToken:Bool, $followerRead:Bool, $mpCount:Uint64, $name:String, $owner:String, $zoneName:String, $description:String) {\n      createVolume(authenticate:$authenticate, capacity:$capacity, crossZone:$crossZone, dataPartitionSize:$dataPartitionSize, dpReplicaNum:$dpReplicaNum, enableToken:$enableToken, followerRead:$followerRead, mpCount:$mpCount, name:$name, owner:$owner, zoneName:$zoneName, description:$description){\n        name\n      }\n    }"]),u=i()(["mutation updateVolume($authKey:String, $capacity:Uint64, $enableToken:Bool, $name:String, $replicaNum:Uint64, $zoneName:String, $description:String) {\n      updateVolume(authKey:$authKey, capacity:$capacity, enableToken:$enableToken, name:$name, replicaNum:$replicaNum, zoneName:$zoneName, description:$description){\n        name\n        capacity\n      }\n    }"],["mutation updateVolume($authKey:String, $capacity:Uint64, $enableToken:Bool, $name:String, $replicaNum:Uint64, $zoneName:String, $description:String) {\n      updateVolume(authKey:$authKey, capacity:$capacity, enableToken:$enableToken, name:$name, replicaNum:$replicaNum, zoneName:$zoneName, description:$description){\n        name\n        capacity\n      }\n    }"]),d=i()(["mutation deleteVolume($authKey:String, $name:String) {\n      deleteVolume(authKey:$authKey, name:$name){\n        code\n        message\n      }\n    }"],["mutation deleteVolume($authKey:String, $name:String) {\n      deleteVolume(authKey:$authKey, name:$name){\n        code\n        message\n      }\n    }"]),p=i()(["query volPermission ($volName:String, $userID:String) {\n      volPermission (volName:$volName, userID:$userID) {\n        userID,\n        access\n      }\n    }"],["query volPermission ($volName:String, $userID:String) {\n      volPermission (volName:$volName, userID:$userID) {\n        userID,\n        access\n      }\n    }"]),g=i()(["mutation updateUserPolicy($policy:Array, $userID:String, $volume:String) {\n      updateUserPolicy(policy:$policy, userID:$userID, volume:$volume){\n        user_id\n      }\n    }"],["mutation updateUserPolicy($policy:Array, $userID:String, $volume:String) {\n      updateUserPolicy(policy:$policy, userID:$userID, volume:$volume){\n        user_id\n      }\n    }"]),v=i()(["mutation removeUserPolicy($userID:String, $volume:String) {\n      removeUserPolicy(userID:$userID, volume:$volume){\n        user_id\n      }\n    }"],["mutation removeUserPolicy($userID:String, $volume:String) {\n      removeUserPolicy(userID:$userID, volume:$volume){\n        user_id\n      }\n    }"]),h=i()(["mutation decommissionDataNode($offLineAddr:String) {\n      decommissionDataNode(offLineAddr:$offLineAddr){\n        code\n        message\n      }\n    }"],["mutation decommissionDataNode($offLineAddr:String) {\n      decommissionDataNode(offLineAddr:$offLineAddr){\n        code\n        message\n      }\n    }"]),f=i()(["mutation decommissionMetaNode($offLineAddr:String) {\n      decommissionMetaNode(offLineAddr:$offLineAddr){\n        code\n        message\n      }\n    }"],["mutation decommissionMetaNode($offLineAddr:String) {\n      decommissionMetaNode(offLineAddr:$offLineAddr){\n        code\n        message\n      }\n    }"]),y=i()(["mutation decommissionDisk($offLineAddr:String, $diskPath:String) {\n      decommissionDisk(offLineAddr:$offLineAddr, diskPath:$diskPath){\n        code\n        message\n      }\n    }"],["mutation decommissionDisk($offLineAddr:String, $diskPath:String) {\n      decommissionDisk(offLineAddr:$offLineAddr, diskPath:$diskPath){\n        code\n        message\n      }\n    }"]),D={queryServerList:n()(r),serverManagementList:n()(l),queryVolumeList:n()(c),createVolume:n()(m),updateVolume:n()(u),deleteVolume:n()(d),queryPermissionList:n()(p),grantPermission:n()(g),deletePermission:n()(v),decommissionDataNode:n()(h),decommissionMetaNode:n()(f),decommissionDisk:n()(y)};t.a=D},"3aj8":function(e,t){},"7Lal":function(e,t){},D64I:function(e,t){},GTdC:function(e,t){},"M0q/":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("aA9S"),i=a.n(s),o=a("181+"),n={name:"OperationServer",data:function(){return{resData:{loading:!0,page:{pageSizes:[10,20,30,40],pageNo:1,pageSize:10,totalRecord:0,totalPage:1},resLists:[]},serverList:[],dataNodesList:[],metaNodesList:[],diskDialog:!1,diskData:{},checkList:[],checkListVal:[],diskTip:"Are you sure you want to off-line the next Disk?"}},methods:{handleSizeChange:function(e){this.resData.page.pageSize=e,this.resData.page.pageNo=1,this.handleCurrentChange(1)},handleCurrentChange:function(e){this.resData.page.pageNo=e;var t=(e-1)*this.resData.page.pageSize,a=e*this.resData.page.pageSize;this.resData.resLists=this.serverList.slice(t,a)},queryServerList:function(){var e=this,t=this;t.resData.loading=!0;this.apollo.query(this.url.cluster,o.a.serverManagementList,{num:1e4}).then(function(a){if(t.resData.loading=!1,a){var s=a.data;e.dataNodesList=s.clusterView.dataNodes,e.metaNodesList=s.clusterView.metaNodes,e.dataNodesList.forEach(function(t){t.name=s.clusterView.name,t.serverType="dataNodes",t.statusStr=t.status.toString(),t.allDataNode=t.toDataNode,t.allDataNode.capacityRatio=(100*t.toDataNode.usageRatio).toFixed(2)+"%",e.checkListVal=t.reportDisks}),e.metaNodesList.forEach(function(e){e.name=s.clusterView.name,e.serverType="metaNodes",e.statusStr=e.status.toString(),e.allDataNode=e.toMetaNode,e.allDataNode.capacityRatio=(100*e.toMetaNode.ratio).toFixed(2)+"%"}),e.serverList=e.dataNodesList.concat(e.metaNodesList),e.serverList.sort(function(e,t){return e.status===t.status?0:t.status?-1:1}),e.resData.page.totalRecord=e.serverList.length,e.handleCurrentChange(1)}}).catch(function(e){t.resData.loading=!1,console.log(e)})},openDialog:function(e,t){"editDisk"===e&&(this.diskDialog=!0,this.diskData=i()({},t),0===this.checkListVal.length&&(this.diskTip="No disk!"))},editDisk:function(){var e=this;0===this.checkList.length&&this.$message.error("No disk!");for(var t=0;t<this.checkList.length;t++){var a={offLineAddr:this.diskData.addr,diskPath:this.checkList[t]};this.apollo.mutation(this.url.cluster,o.a.decommissionDisk,a).then(function(t){200===t.code?(e.queryServerList(),e.diskDialog=!1,e.$message({message:"success",type:"success"})):e.$message.error(t.message)})}},editServer:function(e){var t=this,a={offLineAddr:e.addr};this.$confirm("Are you sure you want to off-line the Server?","Off-line Server",{confirmButtonText:"Yes",cancelButtonText:"No",type:"warning"}).then(function(){"dataNodes"===e.serverType?t.apollo.mutation(t.url.cluster,o.a.decommissionDataNode,a).then(function(e){200===e.code?(t.queryServerList(),t.$message({message:e.data.decommissionDataNode.message,type:"success"})):t.$message.error(e.message)}):"metaNodes"===e.serverType&&t.apollo.mutation(t.url.cluster,o.a.decommissionMetaNode,a).then(function(e){200===e.code?(t.queryServerList(),t.$message({message:e.data.decommissionDataNode.message,type:"success"})):t.$message.error(e.message)})}).catch(function(){})},closeDialog:function(){this.diskDialog=!1,this.checkList=[]}},mounted:function(){this.queryServerList()}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"operation-server"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.resData.loading,expression:"resData.loading"}]},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.resData.resLists}},[a("el-table-column",{attrs:{prop:"name",label:"Cluster"}}),e._v(" "),a("el-table-column",{attrs:{prop:"allDataNode.zoneName",label:"IDC"}}),e._v(" "),a("el-table-column",{attrs:{prop:"addr",label:"Server IP"}}),e._v(" "),a("el-table-column",{attrs:{prop:"serverType",label:"Service Type"}}),e._v(" "),a("el-table-column",{attrs:{prop:"statusStr",label:"Status"}}),e._v(" "),a("el-table-column",{attrs:{prop:"allDataNode.used",label:"Used Capacity"}}),e._v(" "),a("el-table-column",{attrs:{prop:"allDataNode.total",label:"Total Capacity"}}),e._v(" "),a("el-table-column",{attrs:{prop:"allDataNode.capacityRatio",label:"Used %"}}),e._v(" "),a("el-table-column",{attrs:{label:"Actions",width:"230"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{directives:[{name:"show",rawName:"v-show",value:"dataNodes"===t.row.serverType,expression:"scope.row.serverType === 'dataNodes'"}],staticClass:"text-btn",attrs:{type:"text"},on:{click:function(a){return e.openDialog("editDisk",t.row)}}},[e._v("Off-line Disk")]),e._v(" "),a("el-button",{staticClass:"text-btn",attrs:{type:"text"},on:{click:function(a){return e.editServer(t.row)}}},[e._v("Off-line Server")])]}}])})],1),e._v(" "),a("div",{staticClass:"clearfix mt20"},[a("el-pagination",{staticClass:"fr",attrs:{"page-sizes":e.resData.page.pageSizes,"page-size":e.resData.page.pageSize,layout:"sizes, prev, pager, next",total:e.resData.page.totalRecord},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),a("span",{staticClass:"fr page-tips pr10"},[e._v("Each page shows")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"Off-line Disk",visible:e.diskDialog,width:"30%"},on:{"update:visible":function(t){e.diskDialog=t},close:function(t){return e.closeDialog()}}},[a("p",{staticClass:"mb20"},[e._v(e._s(e.diskTip))]),e._v(" "),a("el-checkbox-group",{model:{value:e.checkList,callback:function(t){e.checkList=t},expression:"checkList"}},e._l(e.checkListVal,function(t){return a("el-checkbox",{key:t,attrs:{label:t}},[e._v(e._s(t))])}),1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.closeDialog}},[e._v("No")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.editDisk}},[e._v("Yes")])],1)],1)],1)},staticRenderFns:[]};var l=a("C7Lr")(n,r,!1,function(e){a("7Lal")},"data-v-7558ef8a",null).exports,c=a("X7mb"),m={name:"volumeManagement",data:function(){return{labelPosition:"top",searchVal:"",volumeList:[],resData:{loading:!0,page:{pageSizes:[10,20,30,40],pageNo:1,pageSize:10,totalRecord:0,totalPage:1},resLists:[]},totalCapacity:null,createVolumeDialog:!1,notesDialog:!1,editVolumeDialog:!1,volumeExtensionDialog:!1,permissionDialog:!1,grantPermissionDialog:!1,editPermissionDialog:!1,createVolumeForm:{name:"",totalCapacity:null,dpReplicaNum:null,owner:"",notes:""},dpReplicaNumList:["2","3"],extendCapacity:null,rules:{dpReplicaNum:[{required:!0,message:"Please select Replications",trigger:"change"}],owner:[{required:!0,message:"Please enter Owner ID",trigger:"blur"}],notes:[{required:!0,message:"Please enter Notes",trigger:"blur"}]},editVolumeForm:{},permissionList:[],grantPermissionForm:{userName:"",access:""},editPermissionForm:{},volName:"",accessList:["perm:builtin:ReadOnly","perm:builtin:Writable"],permissionRules:{userName:[{required:!0,message:"Please enter User Name",trigger:"blur"}],access:[{required:!0,message:"Please select Access",trigger:"change"}]},permissionItem:null,description:"",desContent:""}},methods:{handleSizeChange:function(e){this.resData.page.pageSize=e,this.resData.page.pageNo=1,this.handleCurrentChange(1)},handleCurrentChange:function(e){this.resData.page.pageNo=e;var t=(e-1)*this.resData.page.pageSize,a=e*this.resData.page.pageSize;this.resData.resLists=this.volumeList.slice(t,a)},queryVolumeList:function(){var e=this;this.resData.loading=!0;var t={keyword:"",userID:this.userID,num:1e4};this.apollo.query(this.url.volume,o.a.queryVolumeList,t).then(function(t){if(e.resData.loading=!1,t){var a=[];e.searchVal&&""!==e.searchVal.trim()?t.data.listVolume.forEach(function(t){t.name.indexOf(e.searchVal.trim())>-1&&a.push(t)}):a=t.data.listVolume,a.sort(function(e,t){return t.createTime-e.createTime}),e.volumeList=a,e.resData.page.totalRecord=t.data.listVolume.length,e.handleCurrentChange(1),e.totalCapacity=0,e.volumeList.forEach(function(t){e.totalCapacity+=t.capacity,t.occupiedPercent=(t.occupied/1024/1024/1024/t.capacity*100).toFixed(2)+"%",t.capacityStr=t.capacity+"G",t.occupiedStr=(t.occupied/1024/1024/1024).toFixed(4)+"G",e.accessKey=t.oSSAccessKey,e.secretKey=t.oSSSecretKey,t.createTime&&(t.createTime=1e3*t.createTime),t.createTime=Object(c.a)(t.createTime,"-")+" "+Object(c.c)(t.createTime,":")})}}).catch(function(t){e.resData.loading=!1,console.log(t)})},createVolume:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var a={authenticate:!1,capacity:parseInt(t.createVolumeForm.totalCapacity),crossZone:!1,dataPartitionSize:0,dpReplicaNum:parseInt(t.createVolumeForm.dpReplicaNum),enableToken:!1,followerRead:!1,mpCount:0,name:t.createVolumeForm.name,owner:t.createVolumeForm.owner,zoneName:"",description:t.createVolumeForm.notes};t.apollo.mutation(t.url.volume,o.a.createVolume,a).then(function(e){200===e.code?(t.createVolumeDialog=!1,t.queryVolumeList(),t.$message({message:"success",type:"success"})):t.$message.error(e.message)})})},updateVolume:function(){var e=this,t={authKey:this.md5(this.editVolumeForm.owner),name:this.editVolumeForm.name,replicaNum:parseInt(this.editVolumeForm.dpReplicaNum),description:this.desContent};t.replicaNum>this.editRow.dpReplicaNum?this.$message.error("don't support new replicaNum[3] larger than old dpReplicaNum[2]"):this.apollo.mutation(this.url.volume,o.a.updateVolume,t).then(function(t){200===t.code?(e.queryVolumeList(),e.editVolumeDialog=!1,e.$message({message:"success",type:"success"})):e.$message.error(t.message)})},extendVolume:function(){var e=this,t={authKey:this.md5(this.editVolumeForm.owner),name:this.editVolumeForm.name,capacity:parseInt(this.extendCapacity)};t.capacity<this.editVolumeForm.capacity?this.$message.error("capacity["+t.capacity+"] less than old capacity["+this.editVolumeForm.capacity+"]"):this.apollo.mutation(this.url.volume,o.a.updateVolume,t).then(function(t){200===t.code?(e.queryVolumeList(),e.extendCapacity=null,e.volumeExtensionDialog=!1,e.$message({message:"success",type:"success"})):e.$message.error(t.message)})},deleteVolume:function(e){var t=this,a={authKey:this.md5(e.owner),name:e.name};this.$confirm("Are you sure  you want to  delete the volume bucket?","Warnning",{confirmButtonText:"Yes",cancelButtonText:"No",type:"warning"}).then(function(){t.apollo.mutation(t.url.volume,o.a.deleteVolume,a).then(function(e){200===e.code?(t.queryVolumeList(),t.$message({message:"success",type:"success"})):t.$message.error(e.message)})}).catch(function(){})},queryPermissionList:function(){var e=this;this.resData.loading=!0;var t={volName:this.permissionItem.name,userID:this.permissionItem.owner};this.apollo.query(this.url.volume,o.a.queryPermissionList,t).then(function(t){e.resData.loading=!1,t&&(e.permissionList=t.data.volPermission)}).catch(function(t){e.resData.loading=!1,e.$Message.error(t)})},grantPermission:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;var a={policy:[t.grantPermissionForm.access],userID:t.grantPermissionForm.userName,volume:t.permissionItem.name};t.apollo.mutation(t.url.user,o.a.grantPermission,a).then(function(e){200===e.code?(t.grantPermissionDialog=!1,t.queryPermissionList(),t.$message({message:"success",type:"success"})):t.$message.error(e.message)})})},editPermission:function(){var e=this,t={policy:[this.editPermissionForm.access],userID:this.editPermissionForm.userID,volume:this.permissionItem.name};this.apollo.mutation(this.url.user,o.a.grantPermission,t).then(function(t){200===t.code?(e.editPermissionDialog=!1,e.queryPermissionList(),e.$message({message:"success",type:"success"})):e.$message.error(t.message)})},deletePermission:function(e){var t=this,a={userID:e.userID,volume:this.permissionItem.name};this.$confirm("Are you sure you want to remove the user's permission?","Warnning",{confirmButtonText:"Yes",cancelButtonText:"No",type:"warning"}).then(function(){t.apollo.mutation(t.url.user,o.a.deletePermission,a).then(function(e){200===e.code?(t.queryPermissionList(),t.$message({message:"success",type:"success"})):t.$message.error(e.message)})}).catch(function(){})},openGrantPermission:function(){this.grantPermissionDialog=!0},openEditPermission:function(e){this.editPermissionDialog=!0,this.editPermissionForm=i()({},e),this.editPermissionForm.access=this.editPermissionForm.access.join(",")},openDialog:function(e,t){"createVolume"===e&&(this.createVolumeDialog=!0),"edit"===e&&(this.editVolumeDialog=!0,this.editVolumeForm=i()({},t),this.desContent=this.editVolumeForm.toSimpleVolView.description,this.editRow=t),"notes"===e&&(this.notesDialog=!0,this.editVolumeForm=i()({},t),this.description=this.editVolumeForm.toSimpleVolView.description),"extend"===e&&(this.volumeExtensionDialog=!0,this.editVolumeForm=i()({},t)),"permission"===e&&(this.permissionDialog=!0,this.permissionItem=t,this.queryPermissionList(t))},closeDialog:function(e){"create"===e&&(this.createVolumeDialog=!1,this.createVolumeForm={},this.$refs.createVolumeForm.resetFields()),"extend"===e&&(this.volumeExtensionDialog=!1,this.extendCapacity=null),"grantPer"===e&&(this.grantPermissionDialog=!1,this.grantPermissionForm={},this.$refs.grantPermissionForm.resetFields()),"editPer"===e&&(this.editPermissionDialog=!1)},checkNumber:function(e,t,a){if(!/(^[1-9]\d*$)/.test(t))return a(new Error("必须为正整数"));a()},checkVolName:function(e,t,a){if(!/(^[a-z0-9]{1}[a-z0-9\\-]{1,61}[a-z0-9]$)/.test(t))return a(new Error("Volume名称可以包含小写字母、数字和连字符,必须以字母或数字开头和结尾且长度3到63"));a()},checkOwnerId:function(e,t,a){if(!/(^[A-Za-z][A-Za-z0-9_]{0,20}$)/.test(t))return a(new Error("Consists of letters, numbers and underscores, and must start with a letter. No more than 20 characters."));a()}},mounted:function(){this.queryVolumeList()}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"volume"},[a("div",[a("div",{staticClass:"volume-left"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.createVolumeDialog=!0}}},[e._v("Create Volume")])],1),e._v(" "),a("div",{staticClass:"volume-right"},[a("span",{staticClass:"pr10"},[e._v("Volume name")]),e._v(" "),a("el-input",{staticStyle:{width:"255px"},attrs:{placeholder:""},model:{value:e.searchVal,callback:function(t){e.searchVal=t},expression:"searchVal"}}),e._v(" "),a("el-button",{staticClass:"ml5",attrs:{type:"primary"},on:{click:e.queryVolumeList}},[e._v("Search")])],1)]),e._v(" "),a("p",{staticClass:"volume-summary mt20"},[e._v("Volume number : "+e._s(this.resData.page.totalRecord)+"   Total capacity : "+e._s(e.totalCapacity)+"G")]),e._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.resData.loading,expression:"resData.loading"}],staticClass:"data-block"},[a("el-table",{staticClass:"mt10",staticStyle:{width:"100%"},attrs:{data:e.resData.resLists}},[a("el-table-column",{attrs:{prop:"name",label:"Name"}}),e._v(" "),a("el-table-column",{attrs:{prop:"capacityStr",label:"Total capacity"}}),e._v(" "),a("el-table-column",{attrs:{prop:"occupiedStr",label:"Used"}}),e._v(" "),a("el-table-column",{attrs:{prop:"occupiedPercent",label:"Used%"}}),e._v(" "),a("el-table-column",{attrs:{prop:"dpReplicaNum",label:"Replications"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"Status",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"toSimpleVolView.dpCnt",label:"Total Data Partition",width:"85"}}),e._v(" "),a("el-table-column",{attrs:{prop:"toSimpleVolView.rwDpCnt",label:"Available Data Partition",width:"110"}}),e._v(" "),a("el-table-column",{attrs:{prop:"toSimpleVolView.mpCnt",label:"Total Metapartition",width:"130"}}),e._v(" "),a("el-table-column",{attrs:{prop:"owner",label:"Owner ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"Create time",width:"145"}}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"Actions"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-dropdown",{attrs:{trigger:"click",size:"medium"}},[a("span",{staticClass:"el-dropdown-link"},[e._v("\n              Actions"),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),a("el-dropdown-menu",{staticClass:"my-dropdown",attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{nativeOn:{click:function(a){return e.openDialog("extend",t.row)}}},[e._v("Extend")]),e._v(" "),a("el-dropdown-item",{nativeOn:{click:function(a){return e.openDialog("permission",t.row)}}},[e._v("Permission")]),e._v(" "),a("el-dropdown-item",{nativeOn:{click:function(a){return e.openDialog("edit",t.row)}}},[e._v("Edit")]),e._v(" "),a("el-dropdown-item",{nativeOn:{click:function(a){return e.deleteVolume(t.row)}}},[e._v("Delete")]),e._v(" "),a("el-dropdown-item",{nativeOn:{click:function(a){return e.openDialog("notes",t.row)}}},[e._v("Notes")])],1)],1)]}}])})],1),e._v(" "),a("div",{staticClass:"clearfix mt20"},[a("el-pagination",{staticClass:"fr",attrs:{"page-sizes":e.resData.page.pageSizes,"page-size":e.resData.page.pageSize,layout:"sizes, prev, pager, next",total:e.resData.page.totalRecord},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),a("span",{staticClass:"fr page-tips pr10"},[e._v("Each page shows")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"Create Volume",visible:e.createVolumeDialog,width:"35%"},on:{"update:visible":function(t){e.createVolumeDialog=t},close:function(t){return e.closeDialog("create")}}},[a("el-form",{ref:"createVolumeForm",attrs:{"label-position":e.labelPosition,model:e.createVolumeForm,rules:e.rules}},[a("el-form-item",{attrs:{label:"Volume name",prop:"name",rules:[{required:!0,message:"Please enter Volume name",trigger:"blur"},{validator:e.checkVolName,message:"The volume name can contain lowercase letters, numbers, and hyphens. It must start and end with lowercase letters or numbers, and be in the 3-63 length range.",trigger:"blur"}]}},[a("el-input",{model:{value:e.createVolumeForm.name,callback:function(t){e.$set(e.createVolumeForm,"name",t)},expression:"createVolumeForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"Total capacity",prop:"totalCapacity",rules:[{required:!0,message:"Please enter Total capacity",trigger:"blur"},{validator:e.checkNumber,message:"Must be a positive integer",trigger:"blur"}]}},[a("el-input",{model:{value:e.createVolumeForm.totalCapacity,callback:function(t){e.$set(e.createVolumeForm,"totalCapacity",t)},expression:"createVolumeForm.totalCapacity"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"Owner ID",prop:"owner",rules:[{required:!0,message:"Please enter Owner ID",trigger:"blur"},{validator:e.checkOwnerId,message:"Consists of letters, numbers and underscores, and must start with a letter. No more than 20 characters.",trigger:"blur"}]}},[a("el-input",{model:{value:e.createVolumeForm.owner,callback:function(t){e.$set(e.createVolumeForm,"owner",t)},expression:"createVolumeForm.owner"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"Replications",prop:"dpReplicaNum"}},[a("el-select",{staticStyle:{width:"100%"},model:{value:e.createVolumeForm.dpReplicaNum,callback:function(t){e.$set(e.createVolumeForm,"dpReplicaNum",t)},expression:"createVolumeForm.dpReplicaNum"}},e._l(e.dpReplicaNumList,function(e){return a("el-option",{key:e,attrs:{value:e,label:e}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"Notes",prop:"notes"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.createVolumeForm.notes,callback:function(t){e.$set(e.createVolumeForm,"notes",t)},expression:"createVolumeForm.notes"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.closeDialog("create")}}},[e._v("Cancel")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.createVolume("createVolumeForm")}}},[e._v("Create")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"Edit Volume",visible:e.editVolumeDialog,width:"35%"},on:{"update:visible":function(t){e.editVolumeDialog=t}}},[a("el-form",{attrs:{"label-position":e.labelPosition,model:e.editVolumeForm}},[a("el-form-item",{attrs:{label:"Replications"}},[a("el-select",{staticStyle:{width:"100%"},model:{value:e.editVolumeForm.dpReplicaNum,callback:function(t){e.$set(e.editVolumeForm,"dpReplicaNum",t)},expression:"editVolumeForm.dpReplicaNum"}},e._l(e.dpReplicaNumList,function(e){return a("el-option",{key:e,attrs:{value:e,label:e}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"Notes"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.desContent,callback:function(t){e.desContent=t},expression:"desContent"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.editVolumeDialog=!1}}},[e._v("Cancel")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.updateVolume}},[e._v("Update")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"Notes",visible:e.notesDialog,width:"35%"},on:{"update:visible":function(t){e.notesDialog=t}}},[a("div",{staticClass:"pl10"},[e._v(e._s(e.description))]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.notesDialog=!1}}},[e._v("OK")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"Volume Extension",visible:e.volumeExtensionDialog,width:"35%"},on:{"update:visible":function(t){e.volumeExtensionDialog=t},close:function(t){return e.closeDialog("extend")}}},[a("el-form",{attrs:{"label-position":e.labelPosition,model:e.editVolumeForm}},[a("el-form-item",{attrs:{label:"Volume name"}},[a("el-input",{attrs:{type:"text",disabled:""},model:{value:e.editVolumeForm.name,callback:function(t){e.$set(e.editVolumeForm,"name",t)},expression:"editVolumeForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"Current capacity"}},[a("el-input",{attrs:{type:"text",disabled:""},model:{value:e.editVolumeForm.capacity,callback:function(t){e.$set(e.editVolumeForm,"capacity",t)},expression:"editVolumeForm.capacity"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"Extend to"}},[a("el-input",{attrs:{type:"text"},model:{value:e.extendCapacity,callback:function(t){e.extendCapacity=t},expression:"extendCapacity"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.closeDialog("extend")}}},[e._v("Cancel")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.extendVolume}},[e._v("Extend")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"Permission of Volume_Spark",visible:e.permissionDialog,width:"35%"},on:{"update:visible":function(t){e.permissionDialog=t}}},[a("el-button",{attrs:{type:"primary"},on:{click:e.openGrantPermission}},[e._v("Grant Perimssion")]),e._v(" "),a("el-table",{staticClass:"mt10",staticStyle:{width:"100%"},attrs:{data:e.permissionList}},[a("el-table-column",{attrs:{type:"index",label:"#"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userID",label:"User Name"}}),e._v(" "),a("el-table-column",{attrs:{prop:"access",label:"Access"}}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"Operations"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"text-btn",attrs:{type:"text"},on:{click:function(a){return e.openEditPermission(t.row)}}},[e._v("Edit")]),e._v(" "),a("el-button",{staticClass:"text-btn",attrs:{type:"text"},on:{click:function(a){return e.deletePermission(t.row)}}},[e._v("Remove")])]}}])})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"Grant Permission to",visible:e.grantPermissionDialog,width:"35%"},on:{"update:visible":function(t){e.grantPermissionDialog=t},close:function(t){return e.closeDialog("grantPer")}}},[a("el-form",{ref:"grantPermissionForm",attrs:{"label-position":e.labelPosition,model:e.grantPermissionForm,rules:e.permissionRules}},[a("el-form-item",{attrs:{label:"User Name",prop:"userName"}},[a("el-input",{model:{value:e.grantPermissionForm.userName,callback:function(t){e.$set(e.grantPermissionForm,"userName",t)},expression:"grantPermissionForm.userName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"Access",prop:"access"}},[a("el-select",{staticStyle:{width:"100%"},model:{value:e.grantPermissionForm.access,callback:function(t){e.$set(e.grantPermissionForm,"access",t)},expression:"grantPermissionForm.access"}},e._l(e.accessList,function(e){return a("el-option",{key:e,attrs:{value:e,label:e}})}),1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.closeDialog("grantPer")}}},[e._v("No")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.grantPermission("grantPermissionForm")}}},[e._v("Yes")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"Edit User Access",visible:e.editPermissionDialog,width:"35%"},on:{"update:visible":function(t){e.editPermissionDialog=t}}},[a("el-form",{ref:"grantPermissionForm",attrs:{"label-position":e.labelPosition,model:e.editPermissionForm}},[a("el-form-item",{attrs:{label:"User Name",prop:"userName"}},[a("el-input",{attrs:{disabled:""},model:{value:e.editPermissionForm.userID,callback:function(t){e.$set(e.editPermissionForm,"userID",t)},expression:"editPermissionForm.userID"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"Access",prop:"access"}},[a("el-select",{staticStyle:{width:"100%"},model:{value:e.editPermissionForm.access,callback:function(t){e.$set(e.editPermissionForm,"access",t)},expression:"editPermissionForm.access"}},e._l(e.accessList,function(e){return a("el-option",{key:e,attrs:{value:e,label:e}})}),1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.closeDialog("editPer")}}},[e._v("No")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.editPermission}},[e._v("Yes")])],1)],1)],1)},staticRenderFns:[]};var d={name:"FailureList",data:function(){return{resData:{loading:!0,page:{pageSizes:[10,20,30,40],pageNo:1,pageSize:10,totalRecord:0,totalPage:1},resLists:[]},testData:[{id:"1",name:"Chris",userType:"Admin",comments:"Provides Service for Hbase"},{id:"2",name:"Lee",userType:"User",comments:"Spark"},{id:"3",name:"Sunny",userType:"Admin",comments:"Click Stream"},{id:"4",name:"Chris",userType:"Admin",comments:"Provides Service for Hbase"}]}},methods:{handleSizeChange:function(e){this.resData.page.pageSize=e,this.queryList()},handleCurrentChange:function(e){this.resData.page.pageNo=e,this.queryList()},queryList:function(){var e=this,t=this;t.resData.loading=!0;var a={page:{pageSize:this.resData.page.pageSize,pageIndex:this.resData.page.pageNo},param:{}};this.apollo.query(this.url.operations.queryServerList,o.a.queryList,a).then(function(e){if(t.resData.loading=!1,e){var a=e.content.data;t.resData.page.totalRecord=a.recordsTotal,t.resData.resLists=a.data}}).catch(function(a){t.resData.loading=!1,e.$Message.error(a)})}},mounted:function(){this.resData.resLists=this.testData,this.resData.loading=!1}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"operation-server"},[a("el-table",{staticClass:"mt20",staticStyle:{width:"100%"},attrs:{data:e.resData.resLists}},[a("el-table-column",{attrs:{prop:"id",label:"#"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"User Name"}}),e._v(" "),a("el-table-column",{attrs:{prop:"userType",label:"User Type"}}),e._v(" "),a("el-table-column",{attrs:{prop:"comments",label:"Comments"}})],1),e._v(" "),a("div",{staticClass:"clearfix mt20"},[a("el-pagination",{staticClass:"fr",attrs:{"page-sizes":e.resData.page.pageSizes,"page-size":e.resData.page.pageSize,layout:"sizes, prev, pager, next",total:e.resData.page.totalRecord},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),a("span",{staticClass:"fr page-tips pr10"},[e._v("Each page shows")])],1)],1)},staticRenderFns:[]};var g={name:"Operations",components:{ServerManagement:l,VolumeManagement:a("C7Lr")(m,u,!1,function(e){a("GTdC"),a("3aj8")},"data-v-18c110ea",null).exports,FailureList:a("C7Lr")(d,p,!1,function(e){a("D64I")},"data-v-3e055836",null).exports},data:function(){return{operationsSelect:"ServerManagement"}},methods:{}},v={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"operations"},[a("el-tabs",{attrs:{type:"card"},model:{value:e.operationsSelect,callback:function(t){e.operationsSelect=t},expression:"operationsSelect"}},[a("el-tab-pane",{attrs:{label:"ServerManagement",name:"ServerManagement"}},[a("div",{staticClass:"operation-container"},[a("server-management")],1)]),e._v(" "),a("el-tab-pane",{attrs:{label:"Volume Management",name:"VolumeManagement"}},[a("div",{staticClass:"operation-container"},[a("volume-management")],1)])],1)],1)},staticRenderFns:[]};var h=a("C7Lr")(g,v,!1,function(e){a("vEGX")},null,null);t.default=h.exports},vEGX:function(e,t){}});
//# sourceMappingURL=3.1cf7e00ef00e46f87804.js.map