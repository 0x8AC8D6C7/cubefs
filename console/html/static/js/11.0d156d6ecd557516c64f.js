webpackJsonp([11],{"9AlS":function(e,a){},PRe2:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=t("x11r"),l=t.n(s),i=t("6KKH"),n=t.n(i),r=l()(["query AlarmList($size:int32) {\n    alarmList(size:$size){\n      detail\n      hostname\n      key\n      time\n      type\n      value\n    }\n  }"],["query AlarmList($size:int32) {\n    alarmList(size:$size){\n      detail\n      hostname\n      key\n      time\n      type\n      value\n    }\n  }"]),o=l()(["query clusterView{\n    clusterView{\n        name\n      }\n    }"],["query clusterView{\n    clusterView{\n        name\n      }\n    }"]),u={queryAlarmList:n()(r),clusterView:n()(o)},c={name:"alarm",data:function(){return{clusterName:null,storageLists:[],resData:{loading:!0,page:{pageSizes:[10,20,30,40],pageNo:1,pageSize:10,totalRecord:0,totalPage:1},resLists:[]},signUrlDialog:!1,alarmInfo:null,detailDialog:!1}},methods:{showDetail:function(e){this.alarmInfo=e,this.detailDialog=!0},handleSizeChange:function(e){this.resData.page.pageSize=e,this.resData.page.pageNo=1,this.handleCurrentChange(1)},handleCurrentChange:function(e){this.resData.page.pageNo=e;var a=(e-1)*this.resData.page.pageSize,t=e*this.resData.page.pageSize;this.resData.resLists=this.storageLists.slice(a,t)},queryList:function(){var e=this,a=this;a.resData.loading=!0;this.apollo.query(this.url.cluster,u.queryAlarmList,{size:1e3}).then(function(t){if(a.resData.loading=!1,t.code)e.$message.error(t.message);else{var s=t.data.alarmList;e.storageLists=s,e.resData.page.totalRecord=s.length,e.handleCurrentChange(1)}}).catch(function(e){a.resData.loading=!1,console.log(e)})},queryClusterView:function(){var e=this,a=this;this.apollo.query(this.url.cluster,u.clusterView,{}).then(function(t){if(a.resData.loading=!1,t.code)e.$message.error(t.message);else{var s=t.data.clusterView;e.clusterName=s.name}}).catch(function(e){console.log(e)})}},mounted:function(){this.queryClusterView(),this.queryList()}},g={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"cluster alarm"},[t("h3",[e._v("Alarm Info")]),e._v(" "),t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.resData.loading,expression:"resData.loading"}],staticClass:"data-block"},[t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.resData.resLists}},[t("el-table-column",{attrs:{prop:"",label:"Cluster ID",width:"180"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n          "+e._s(e.clusterName)+"\n        ")]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"detail",label:"Alarm"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("a",{on:{click:function(t){return e.showDetail(a.row)}}},[e._v(e._s(a.row.detail))])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"hostname",label:"Host"}}),e._v(" "),t("el-table-column",{attrs:{prop:"time",label:"Time"}})],1),e._v(" "),t("div",{staticClass:"clearfix mt20"},[t("el-pagination",{staticClass:"fr",attrs:{"page-sizes":e.resData.page.pageSizes,"page-size":e.resData.page.pageSize,layout:"sizes, prev, pager, next",total:e.resData.page.totalRecord},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),t("span",{staticClass:"fr page-tips pr10"},[e._v("Each page shows")])],1)],1),e._v(" "),t("el-dialog",{attrs:{title:"Alarm info",visible:e.detailDialog,width:"35%"},on:{"update:visible":function(a){e.detailDialog=a}}},[e.alarmInfo?t("div",[t("el-row",{staticClass:"mb20",attrs:{gutter:20}},[t("el-col",{attrs:{span:12}},[t("span",{staticClass:"alarm-key mr10"},[e._v("Cluster ID:")]),t("span",[e._v(e._s(e.clusterName))])]),e._v(" "),t("el-col",{attrs:{span:12}},[t("span",{staticClass:"alarm-key mr10"},[e._v("Host:")]),t("span",[e._v(e._s(e.alarmInfo.hostname))])])],1),e._v(" "),t("el-row",{staticClass:"mb20"},[t("span",{staticClass:"alarm-key mr10"},[e._v("Time:")]),t("span",[e._v(e._s(e.alarmInfo.time))])]),e._v(" "),t("p",{staticClass:"mb20"},[e._v(e._s(e.alarmInfo.detail))])],1):e._e()])],1)},staticRenderFns:[]};var m=t("C7Lr")(c,g,!1,function(e){t("9AlS")},"data-v-c10b4730",null);a.default=m.exports}});
//# sourceMappingURL=11.0d156d6ecd557516c64f.js.map