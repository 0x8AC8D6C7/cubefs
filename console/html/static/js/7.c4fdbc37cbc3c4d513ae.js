webpackJsonp([7],{"3Qw2":function(e,s,t){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var r=t("aA9S"),a=t.n(r),i=t("x11r"),o=t.n(i),n=t("6KKH"),l=t.n(n),d=o()(["query ListUserInfo {\n      listUserInfo{\n        user_id\n        user_type\n        description\n      }\n    }"],["query ListUserInfo {\n      listUserInfo{\n        user_id\n        user_type\n        description\n      }\n    }"]),c=o()(["mutation CreateUser($accessKey:String, $iD:String, $password:String,$secretKey:String,$type:Uint8, $description:String) {\n      createUser(accessKey:$accessKey, iD:$iD, password:$password,secretKey:$secretKey,type:$type, description:$description){\n        user_id\n      }\n    }"],["mutation CreateUser($accessKey:String, $iD:String, $password:String,$secretKey:String,$type:Uint8, $description:String) {\n      createUser(accessKey:$accessKey, iD:$iD, password:$password,secretKey:$secretKey,type:$type, description:$description){\n        user_id\n      }\n    }"]),u=o()(["mutation updateUser($accessKey:String, $userID:String, $secretKey:String, $type:Uint8, $description:String, $password:String) {\n      updateUser(accessKey:$accessKey, userID:$userID, secretKey:$secretKey, type:$type, description:$description, password:$password){\n        user_id\n      }\n    }"],["mutation updateUser($accessKey:String, $userID:String, $secretKey:String, $type:Uint8, $description:String, $password:String) {\n      updateUser(accessKey:$accessKey, userID:$userID, secretKey:$secretKey, type:$type, description:$description, password:$password){\n        user_id\n      }\n    }"]),p=o()(["mutation deleteUser($userID:String) {\n      deleteUser(userID:$userID){\n        code\n      }\n    }"],["mutation deleteUser($userID:String) {\n      deleteUser(userID:$userID){\n        code\n      }\n    }"]),m={queryUserList:l()(d),createUser:l()(c),updateUser:l()(u),deleteUser:l()(p)},g={name:"authorization",data:function(){return{labelPosition:"top",searchVal:"",resData:{loading:!0,page:{pageSizes:[10,20,30,40],pageNo:1,pageSize:10,totalRecord:0,totalPage:1},resLists:[]},userInfoList:[],volumeName:"",addUserDialog:!1,editUserDialog:!1,deleteUserDialog:!1,addUserForm:{userName:"",password:"",confirmPassword:"",comments:"",type:null},typeList:[{value:"2",label:"admin"},{value:"3",label:"user"}],editUserForm:{password:"",confirmPassword:""},rules:{type:[{required:!0,message:"Please select Type",trigger:"change"}]}}},computed:{crumbInfo:function(){return this.volumeName}},methods:{handleSizeChange:function(e){this.resData.page.pageSize=e,this.resData.page.pageNo=1,this.handleCurrentChange(1)},handleCurrentChange:function(e){this.resData.page.pageNo=e;var s=(e-1)*this.resData.page.pageSize,t=e*this.resData.page.pageSize;this.resData.resLists=this.userInfoList.slice(s,t)},queryUserList:function(){var e=this,s=this;s.resData.loading=!0;this.apollo.query(this.url.authorization,m.queryUserList,{num:1e4}).then(function(t){if(s.resData.loading=!1,t){var r=[];e.searchVal&&""!==e.searchVal.trim()?t.data.listUserInfo.forEach(function(s){s.user_id.indexOf(e.searchVal.trim())>-1&&r.push(s)}):r=t.data.listUserInfo,r.sort(function(e,s){return e.user_id.charCodeAt(0)-s.user_id.charCodeAt(0)}).sort(function(e,s){return e.user_type-s.user_type}),e.userInfoList=r,e.userInfoList.forEach(function(e){1===e.user_type&&(e.userTypeStr="root"),2===e.user_type&&(e.userTypeStr="admin"),3===e.user_type&&(e.userTypeStr="user")}),e.resData.page.totalRecord=e.userInfoList.length,e.handleCurrentChange(1)}}).catch(function(){s.resData.loading=!1})},addUser:function(e){var s=this;this.$refs[e].validate(function(e){if(!e)return!1;var t={accessKey:"",iD:s.addUserForm.userName,password:s.addUserForm.password,secretKey:"",description:s.addUserForm.comments||"",type:parseInt(s.addUserForm.type)};s.apollo.mutation(s.url.authorization,m.createUser,t).then(function(e){200===e.code?(s.queryUserList(),s.addUserDialog=!1,s.addUserForm={},s.$message({message:"success",type:"success"})):s.$message.error(e.message)}).catch(function(e){s.resData.loading=!1,console.log(e)})})},updateUser:function(){var e=this;if(this.editUserForm.password===this.editUserForm.confirmPassword){var s={accessKey:"",secretKey:"",password:this.editUserForm.password||"",userID:this.editUserForm.user_id,description:this.editUserForm.description,type:parseInt(this.editUserForm.user_type)};this.apollo.mutation(this.url.authorization,m.updateUser,s).then(function(s){200===s.code?(e.queryUserList(),e.editUserDialog=!1,e.$message({message:"success",type:"success"})):e.$message.error(s.message)})}else this.$message({message:"Confirmation password is not identical.",type:"warning"})},deleteUser:function(){var e=this,s={userID:this.editUserForm.user_id};this.apollo.mutation(this.url.authorization,m.deleteUser,s).then(function(s){200===s.code?(e.queryUserList(),e.deleteUserDialog=!1,e.$message({message:"success",type:"success"})):e.$message.error(s.message)}).catch(function(s){e.resData.loading=!1,console.log(s)})},openDialog:function(e,s){"add"===e&&(this.addUserDialog=!0),"edit"===e&&(this.editUserDialog=!0,this.editUserForm=a()({},s),this.editUserForm.user_type=this.editUserForm.user_type+""),"delete"===e&&(this.deleteUserDialog=!0,this.editUserForm=s)},closeDialog:function(){this.addUserDialog=!1,this.addUserForm={},this.$refs.addUserForm.resetFields()},checkUserName:function(e,s,t){if(!/(^[A-Za-z][A-Za-z0-9_]{0,20}$)/.test(s))return t(new Error("Consists of letters, numbers and underscores, and must start with a letter. No more than 20 characters."));t()},checkPassword:function(e,s,t){if(!/([A-Za-z0-9]{6,30}$)/.test(s))return t(new Error("Consists of letters and numbers. No less than 6 characters.No more than 30 characters."));t()},confirmPassword:function(e,s,t){if(this.addUserForm.password!==this.addUserForm.confirmPassword)return t(new Error("Confirmation password is not identical."));t()},confirmNewPassword:function(e,s,t){if(this.editUserForm.password!==this.editUserForm.confirmPassword)return t(new Error("Confirmation password is not identical."));t()}},mounted:function(){var e=this.$route.query;this.volumeName=e.volumeName,this.queryUserList()}},U={render:function(){var e=this,s=e.$createElement,r=e._self._c||s;return r("div",{staticClass:"cluster author"},[r("div",[r("div",{staticClass:"volume-left"},[r("el-button",{attrs:{type:"primary"},on:{click:function(s){return e.openDialog("add")}}},[e._v("Add User")])],1),e._v(" "),r("div",{staticClass:"volume-right"},[r("el-input",{staticStyle:{width:"255px"},attrs:{placeholder:""},model:{value:e.searchVal,callback:function(s){e.searchVal=s},expression:"searchVal"}}),e._v(" "),r("el-button",{staticClass:"ml5",attrs:{type:"primary"},on:{click:e.queryUserList}},[e._v("Search")])],1)]),e._v(" "),r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.resData.loading,expression:"resData.loading"}],staticClass:"data-block"},[r("el-table",{staticClass:"mt20",staticStyle:{width:"100%"},attrs:{data:e.resData.resLists}},[r("el-table-column",{attrs:{type:"index",label:"#"}}),e._v(" "),r("el-table-column",{attrs:{prop:"user_id",label:"User Name"}}),e._v(" "),r("el-table-column",{attrs:{prop:"userTypeStr",label:"User Type"}}),e._v(" "),r("el-table-column",{attrs:{prop:"description",label:"Comments"}}),e._v(" "),r("el-table-column",{attrs:{label:"Actions"},scopedSlots:e._u([{key:"default",fn:function(s){return[r("el-button",{staticClass:"text-btn",attrs:{type:"text"},on:{click:function(t){return e.openDialog("edit",s.row)}}},[e._v("Edit")]),e._v(" "),r("el-button",{staticClass:"text-btn",attrs:{type:"text"},on:{click:function(t){return e.openDialog("delete",s.row)}}},[e._v("Delete")])]}}])})],1),e._v(" "),r("div",{staticClass:"clearfix mt20"},[r("el-pagination",{staticClass:"fr",attrs:{"page-sizes":e.resData.page.pageSizes,"page-size":e.resData.page.pageSize,layout:"sizes, prev, pager, next",total:e.resData.page.totalRecord},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),r("span",{staticClass:"fr page-tips pr10"},[e._v("Each page shows")])],1)],1),e._v(" "),r("el-dialog",{attrs:{title:"Add New User",visible:e.addUserDialog,width:"30%"},on:{"update:visible":function(s){e.addUserDialog=s},close:e.closeDialog}},[r("el-form",{ref:"addUserForm",attrs:{"label-position":e.labelPosition,model:e.addUserForm,rules:e.rules}},[r("el-form-item",{attrs:{label:"User Name",prop:"userName",rules:[{required:!0,message:"Please enter User Name",trigger:"blur"},{validator:e.checkUserName,message:"Consists of letters, numbers and underscores, and must start with a letter. No more than 20 characters.",trigger:"blur"}]}},[r("el-input",{model:{value:e.addUserForm.userName,callback:function(s){e.$set(e.addUserForm,"userName",s)},expression:"addUserForm.userName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"Set password",prop:"password",rules:[{required:!0,message:"Please enter Password",trigger:"blur"},{validator:e.checkPassword,message:"Consists of letters and numbers. No less than 6 characters.No more than 30 characters.",trigger:"blur"}]}},[r("el-input",{attrs:{"show-password":""},model:{value:e.addUserForm.password,callback:function(s){e.$set(e.addUserForm,"password",s)},expression:"addUserForm.password"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"Confirm password",prop:"confirmPassword",rules:[{required:!0,message:"Please enter Confirmation password",trigger:"blur"},{validator:e.confirmPassword,message:"Confirmation password is not identical.",trigger:"blur"}]}},[r("el-input",{attrs:{"show-password":""},model:{value:e.addUserForm.confirmPassword,callback:function(s){e.$set(e.addUserForm,"confirmPassword",s)},expression:"addUserForm.confirmPassword"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"Type",prop:"type"}},[r("el-select",{staticStyle:{width:"100%"},model:{value:e.addUserForm.type,callback:function(s){e.$set(e.addUserForm,"type",s)},expression:"addUserForm.type"}},e._l(e.typeList,function(e){return r("el-option",{key:e.value,attrs:{value:e.value,label:e.label}})}),1)],1),e._v(" "),r("el-form-item",{attrs:{label:"Comments"}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.addUserForm.comments,callback:function(s){e.$set(e.addUserForm,"comments",s)},expression:"addUserForm.comments"}})],1)],1),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.closeDialog}},[e._v("No")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:function(s){return e.addUser("addUserForm")}}},[e._v("Yes")])],1)],1),e._v(" "),r("el-dialog",{attrs:{title:"Edit User Authorizaiton",visible:e.editUserDialog,width:"30%"},on:{"update:visible":function(s){e.editUserDialog=s}}},[r("el-form",{attrs:{"label-position":e.labelPosition,model:e.editUserForm,rules:e.rules}},[r("el-form-item",{attrs:{label:"User Name"}},[r("el-input",{attrs:{disabled:""},model:{value:e.editUserForm.user_id,callback:function(s){e.$set(e.editUserForm,"user_id",s)},expression:"editUserForm.user_id"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"New Password",prop:"password",rules:[{validator:e.checkPassword,message:"Consists of letters and numbers. No less than 6 characters.No more than 30 characters.",trigger:"blur"}]}},[r("el-input",{attrs:{"show-password":""},model:{value:e.editUserForm.password,callback:function(s){e.$set(e.editUserForm,"password",s)},expression:"editUserForm.password"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"Confirm New Password",prop:"confirmPassword",rules:[{validator:e.confirmNewPassword,message:"Confirmation password is not identical.",trigger:"blur"}]}},[r("el-input",{attrs:{"show-password":""},model:{value:e.editUserForm.confirmPassword,callback:function(s){e.$set(e.editUserForm,"confirmPassword",s)},expression:"editUserForm.confirmPassword"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"Type"}},[r("el-select",{staticStyle:{width:"100%"},model:{value:e.editUserForm.user_type,callback:function(s){e.$set(e.editUserForm,"user_type",s)},expression:"editUserForm.user_type"}},e._l(e.typeList,function(e){return r("el-option",{key:e.value,attrs:{value:e.value,label:e.label}})}),1)],1),e._v(" "),r("el-form-item",{attrs:{label:"Comments"}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.editUserForm.description,callback:function(s){e.$set(e.editUserForm,"description",s)},expression:"editUserForm.description"}})],1)],1),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(s){e.editUserDialog=!1}}},[e._v("No")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.updateUser}},[e._v("Yes")])],1)],1),e._v(" "),r("el-dialog",{attrs:{title:"Delete",visible:e.deleteUserDialog,width:"30%"},on:{"update:visible":function(s){e.deleteUserDialog=s}}},[r("div",{staticClass:"delete-tip"},[r("i",{staticClass:"warn"},[r("img",{attrs:{src:t("LkBP"),alt:""}})]),e._v("\n      Are you sure you want to delete the User?\n    ")]),e._v(" "),r("el-form",{attrs:{"label-position":e.labelPosition,model:e.editUserForm}},[r("el-form-item",{attrs:{label:"User Name"}},[r("el-input",{attrs:{disabled:""},model:{value:e.editUserForm.user_id,callback:function(s){e.$set(e.editUserForm,"user_id",s)},expression:"editUserForm.user_id"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"Comments"}},[r("el-input",{attrs:{type:"textarea",disabled:""},model:{value:e.editUserForm.description,callback:function(s){e.$set(e.editUserForm,"description",s)},expression:"editUserForm.description"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"Type"}},[r("el-select",{staticStyle:{width:"100%"},attrs:{disabled:""},model:{value:e.editUserForm.userTypeStr,callback:function(s){e.$set(e.editUserForm,"userTypeStr",s)},expression:"editUserForm.userTypeStr"}},e._l(e.typeList,function(e){return r("el-option",{key:e.value,attrs:{value:e.value,label:e.label}})}),1)],1)],1),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(s){e.deleteUserDialog=!1}}},[e._v("No")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.deleteUser}},[e._v("Yes")])],1)],1)],1)},staticRenderFns:[]};var f=t("C7Lr")(g,U,!1,function(e){t("8Zuo"),t("6k65")},"data-v-5c51e750",null);s.default=f.exports},"6k65":function(e,s){},"8Zuo":function(e,s){},LkBP:function(e,s){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAZiS0dEAP8A/wD/oL2nkwAAAbtJREFUWMPVWb1OwzAQNiMSMDKw2qgDEjuvwaPwAkjtszSOEkBiYc0DwNYpT0AXFqoEJKSau4SaFgWRn8/BjnSqpcbnr3e+z5+vQvR83mMly1hdlVrNybJSy5w+V7VV46z6jt7hd8UYj7k7Py60nJItikiaTsZzaC77wANLzg7etLrm6HQG9sPYB/tinxBwZXx6Sb98ORRYQ0SX7Lt/1IzZq6Mm13BwNppyXUWT1uqY0ot9SkXiClhD2hNes3XkaEI6FrgdkG0iySEfG9zGeO0/C8LlnmuzJ38tHC57J9Xao7obKQiRWtpHH2zwVDO7DyZhrV4KPTmpjcYDyXznxKGwzgZHL1I3di9reQtI9XQb4AJBE98AARxKmKwqQfEYFCBZpYJYDvkKkLGxs7m3AAkbO8s8BphxxeX+ApS5QIhQhxFcCeKvV28BErYgUgwqEvloiT+ST8AiwdDMl8MUKXZrmgERtRN9yESNOuo2mxpVdPaoQ4kF8vFs7ieH5kEd8RgmFmByiySWM7nlvWD1XvIHcWny/toZxMU9iNbHVvMoHRFc2rp5FET7LYgGZjAt4IYm+sy7Jvp//g3xCU4zj6BD/PgbAAAAAElFTkSuQmCC"}});
//# sourceMappingURL=7.c4fdbc37cbc3c4d513ae.js.map