{"version":3,"sources":["webpack:///src/views/overview/userDetails.vue","webpack:///./src/views/overview/userDetails.vue?84b0","webpack:///./src/views/overview/userDetails.vue","webpack:///./src/graphql/overview.js"],"names":["userDetails","name","data","searchVal","resData","loading","page","pageSizes","pageNo","pageSize","totalRecord","totalPage","resLists","storageLists","methods","handleSizeChange","val","this","handleCurrentChange","start","end","slice","queryList","_this","that","apollo","query","url","user","overview","queryUserList","num","then","res","finalUserInfo","trim","listUserInfo","forEach","user_id","indexOf","push","item","user_type","userTypeStr","length","catch","error","console","log","mounted","overview_userDetails","render","_vm","_h","$createElement","_c","_self","staticClass","_v","staticStyle","width","attrs","placeholder","model","value","callback","$$v","expression","type","on","click","directives","rawName","label","prop","page-sizes","page-size","layout","total","size-change","current-change","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__","baseGql","ClusterView","gql","_templateObject","topNUser","_templateObject2","dataNode","_templateObject3","rangeQuery","_templateObject4","rangeVolQuery","_templateObject5","_templateObject6"],"mappings":"+IAwDAA,GACAC,KAAA,cACAC,KAFA,WAGA,OACAC,UAAA,GACAC,SACAC,SAAA,EACAC,MACAC,WAAA,aACAC,OAAA,EACAC,SAAA,GACAC,YAAA,EACAC,UAAA,GAEAC,aAEAC,kBAGAC,SACAC,iBADA,SACAC,GACAC,KAAAb,QAAAE,KAAAG,SAAAO,EACAC,KAAAb,QAAAE,KAAAE,OAAA,EACAS,KAAAC,oBAAA,IAEAA,oBANA,SAMAF,GACAC,KAAAb,QAAAE,KAAAE,OAAAQ,EACA,IAAAG,GAAAH,EAAA,GAAAC,KAAAb,QAAAE,KAAAG,SACAW,EAAAJ,EAAAC,KAAAb,QAAAE,KAAAG,SACAQ,KAAAb,QAAAQ,SAAAK,KAAAJ,aAAAQ,MAAAF,EAAAC,IAEAE,UAZA,WAYA,IAAAC,EAAAN,KACAO,EAAAP,KACAO,EAAApB,QAAAC,SAAA,EAIAY,KAAAQ,OAAAC,MAAAT,KAAAU,IAAAC,KAAAC,EAAA,EAAAC,eAFAC,IAAA,MAEAC,KAAA,SAAAC,GAEA,GADAT,EAAApB,QAAAC,SAAA,EACA4B,EAAA,CACA,IAAAC,KACAX,EAAApB,WAAA,KAAAoB,EAAApB,UAAAgC,OACAF,EAAA/B,KAAAkC,aAAAC,QAAA,SAAAT,GACAA,EAAAU,QAAAC,QAAAhB,EAAApB,UAAAgC,SAAA,GACAD,EAAAM,KAAAZ,KAIAM,EAAAD,EAAA/B,KAAAkC,aAEAb,EAAAV,aAAAqB,EACAX,EAAAV,aAAAwB,QAAA,SAAAI,GACA,IAAAA,EAAAC,YACAD,EAAAE,YAAA,QAEA,IAAAF,EAAAC,YACAD,EAAAE,YAAA,SAEA,IAAAF,EAAAC,YACAD,EAAAE,YAAA,UAGApB,EAAAnB,QAAAE,KAAAI,YAAAa,EAAAV,aAAA+B,OACArB,EAAAL,oBAAA,MAGA2B,MAAA,SAAAC,GACAtB,EAAApB,QAAAC,SAAA,EACA0C,QAAAC,IAAAF,OAIAG,QAxEA,WAyEAhC,KAAAK,cC9He4B,GADEC,OAFjB,WAA0B,IAAAC,EAAAnC,KAAaoC,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,kBAA4BF,EAAA,OAAYE,YAAA,aAAuBF,EAAA,MAAWE,YAAA,OAAiBL,EAAAM,GAAA,iBAAAN,EAAAM,GAAA,KAAAH,EAAA,OAAgDE,YAAA,OAAiBF,EAAA,YAAiBI,aAAaC,MAAA,SAAgBC,OAAQC,YAAA,SAAsBC,OAAQC,MAAAZ,EAAA,UAAAa,SAAA,SAAAC,GAA+Cd,EAAAjD,UAAA+D,GAAkBC,WAAA,eAAyBf,EAAAM,GAAA,KAAAH,EAAA,aAA8BE,YAAA,MAAAI,OAAyBO,KAAA,WAAiBC,IAAKC,MAAAlB,EAAA9B,aAAuB8B,EAAAM,GAAA,kBAAAN,EAAAM,GAAA,KAAAH,EAAA,OAAiDgB,aAAatE,KAAA,UAAAuE,QAAA,YAAAR,MAAAZ,EAAAhD,QAAA,QAAA+D,WAAA,oBAA4FV,YAAA,eAA2BF,EAAA,YAAiBE,YAAA,OAAAE,aAAgCC,MAAA,QAAeC,OAAQ3D,KAAAkD,EAAAhD,QAAAQ,YAA6B2C,EAAA,mBAAwBM,OAAOO,KAAA,QAAAK,MAAA,OAA4BrB,EAAAM,GAAA,KAAAH,EAAA,mBAAoCM,OAAOa,KAAA,UAAAD,MAAA,OAAAb,MAAA,SAA+CR,EAAAM,GAAA,KAAAH,EAAA,mBAAoCM,OAAOa,KAAA,uBAAAD,MAAA,cAAkDrB,EAAAM,GAAA,KAAAH,EAAA,mBAAoCM,OAAOa,KAAA,8BAAAD,MAAA,kBAA6DrB,EAAAM,GAAA,KAAAH,EAAA,mBAAoCM,OAAOa,KAAA,qCAAAD,MAAA,2BAA6ErB,EAAAM,GAAA,KAAAH,EAAA,mBAAoCM,OAAOa,KAAA,qCAAAD,MAAA,2BAA4E,GAAArB,EAAAM,GAAA,KAAAH,EAAA,OAA4BE,YAAA,kBAA4BF,EAAA,iBAAsBE,YAAA,KAAAI,OAAwBc,aAAAvB,EAAAhD,QAAAE,KAAAC,UAAAqE,YAAAxB,EAAAhD,QAAAE,KAAAG,SAAAoE,OAAA,2BAAAC,MAAA1B,EAAAhD,QAAAE,KAAAI,aAAuJ2D,IAAKU,cAAA3B,EAAArC,iBAAAiE,iBAAA5B,EAAAlC,uBAA6EkC,EAAAM,GAAA,KAAAH,EAAA,QAAyBE,YAAA,sBAAgCL,EAAAM,GAAA,gCAElvDuB,oBCCjB,IAcAC,EAdyBC,EAAQ,OAcjCC,CACEpF,EACAkD,GATF,EAVA,SAAAmC,GACEF,EAAQ,SAaV,kBAEA,MAUeG,EAAA,QAAAJ,EAAiB,qzECzB1BK,GACJC,YAAaC,IAAbC,GAUAC,SAAUF,IAAVG,GAOAC,SAAUJ,IAAVK,GAIAC,WAAYN,IAAZO,GAIAC,cAAeR,IAAfS,GAIApE,cAAe2D,IAAfU,IAcaZ","file":"static/js/10.5046ef9db7e9cb219cf8.js","sourcesContent":["<template>\n  <div class=\"cluster alarm\">\n    <div class=\"clearfix\">\n      <h3 class=\"fl\"> User list </h3>\n      <div class=\"fr\">\n        <el-input v-model=\"searchVal\" placeholder=\"请输入内容\" style=\"width: 255px;\"></el-input>\n        <el-button type=\"primary\" class=\"ml5\" @click=\"queryList\">Search</el-button>\n      </div>\n    </div>\n    <div class=\"data-block\" v-loading=\"resData.loading\">\n      <el-table\n        :data=\"resData.resLists\"\n        class=\"mt20\"\n        style=\"width: 100%\">\n        <el-table-column type=\"index\" label=\"#\"></el-table-column>\n        <el-table-column\n          prop=\"user_id\"\n          label=\"User\"\n          width=\"180\">\n        </el-table-column>\n        <el-table-column\n          prop=\"userStatistical.data\"\n          label=\"Data(TB)\">\n        </el-table-column>\n        <el-table-column\n          prop=\"userStatistical.volumeCount\"\n          label=\"Volume count\">\n        </el-table-column>\n        <el-table-column\n          prop=\"userStatistical.dataPartitionCount\"\n          label=\"Data partiition count\">\n        </el-table-column>\n        <el-table-column\n          prop=\"userStatistical.metaPartitionCount\"\n          label=\"Meta partition count\">\n        </el-table-column>\n      </el-table>\n      <div class=\"clearfix mt20\">\n        <el-pagination\n          class=\"fr\"\n          @size-change=\"handleSizeChange\"\n          @current-change=\"handleCurrentChange\"\n          :page-sizes=\"resData.page.pageSizes\"\n          :page-size=\"resData.page.pageSize\"\n          layout=\"sizes, prev, pager, next\"\n          :total=\"resData.page.totalRecord\">\n        </el-pagination>\n        <span class=\"fr page-tips pr10\">Each page shows</span>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport baseGql from '../../graphql/overview'\n\nexport default {\n  name: 'userDetails',\n  data () {\n    return {\n      searchVal: '',\n      resData: {\n        loading: true,\n        page: {\n          pageSizes: [10, 20, 30, 40],\n          pageNo: 1,\n          pageSize: 10,\n          totalRecord: 0,\n          totalPage: 1\n        },\n        resLists: []\n      },\n      storageLists: []\n    }\n  },\n  methods: {\n    handleSizeChange (val) {\n      this.resData.page.pageSize = val\n      this.resData.page.pageNo = 1\n      this.handleCurrentChange(1)\n    },\n    handleCurrentChange (val) {\n      this.resData.page.pageNo = val\n      const start = (val - 1) * this.resData.page.pageSize\n      const end = val * this.resData.page.pageSize\n      this.resData.resLists = this.storageLists.slice(start, end)\n    },\n    queryList () {\n      const that = this\n      that.resData.loading = true\n      const variables = {\n        num: 10000\n      }\n      this.apollo.query(this.url.user, baseGql.queryUserList, variables).then((res) => {\n        that.resData.loading = false\n        if (res) {\n          let finalUserInfo = []\n          if (this.searchVal && this.searchVal.trim() !== '') {\n            res.data.listUserInfo.forEach(user => {\n              if (user.user_id.indexOf(this.searchVal.trim()) > -1) {\n                finalUserInfo.push(user)\n              }\n            })\n          } else {\n            finalUserInfo = res.data.listUserInfo\n          }\n          this.storageLists = finalUserInfo\n          this.storageLists.forEach(item => {\n            if (item.user_type === 1) {\n              item.userTypeStr = 'root'\n            }\n            if (item.user_type === 2) {\n              item.userTypeStr = 'admin'\n            }\n            if (item.user_type === 3) {\n              item.userTypeStr = 'user'\n            }\n          })\n          this.resData.page.totalRecord = this.storageLists.length\n          this.handleCurrentChange(1)\n        } else {\n        }\n      }).catch((error) => {\n        that.resData.loading = false\n        console.log(error)\n      })\n    }\n  },\n  mounted () {\n    this.queryList()\n    // this.resData.resLists = this.testData\n    // this.resData.loading = false\n  }\n}\n</script>\n\n<style scoped>\n.alarm h3{\n  display: inline-block;\n  margin-right: 60px;\n  line-height: 16px;\n  font-weight: bold;\n  font-size: 14px;\n  color: #333;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/overview/userDetails.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"cluster alarm\"},[_c('div',{staticClass:\"clearfix\"},[_c('h3',{staticClass:\"fl\"},[_vm._v(\" User list \")]),_vm._v(\" \"),_c('div',{staticClass:\"fr\"},[_c('el-input',{staticStyle:{\"width\":\"255px\"},attrs:{\"placeholder\":\"请输入内容\"},model:{value:(_vm.searchVal),callback:function ($$v) {_vm.searchVal=$$v},expression:\"searchVal\"}}),_vm._v(\" \"),_c('el-button',{staticClass:\"ml5\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.queryList}},[_vm._v(\"Search\")])],1)]),_vm._v(\" \"),_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.resData.loading),expression:\"resData.loading\"}],staticClass:\"data-block\"},[_c('el-table',{staticClass:\"mt20\",staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.resData.resLists}},[_c('el-table-column',{attrs:{\"type\":\"index\",\"label\":\"#\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"user_id\",\"label\":\"User\",\"width\":\"180\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"userStatistical.data\",\"label\":\"Data(TB)\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"userStatistical.volumeCount\",\"label\":\"Volume count\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"userStatistical.dataPartitionCount\",\"label\":\"Data partiition count\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"userStatistical.metaPartitionCount\",\"label\":\"Meta partition count\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"clearfix mt20\"},[_c('el-pagination',{staticClass:\"fr\",attrs:{\"page-sizes\":_vm.resData.page.pageSizes,\"page-size\":_vm.resData.page.pageSize,\"layout\":\"sizes, prev, pager, next\",\"total\":_vm.resData.page.totalRecord},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}}),_vm._v(\" \"),_c('span',{staticClass:\"fr page-tips pr10\"},[_vm._v(\"Each page shows\")])],1)],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-03717c79\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/views/overview/userDetails.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-03717c79\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./userDetails.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./userDetails.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./userDetails.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-03717c79\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./userDetails.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-03717c79\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/overview/userDetails.vue\n// module id = null\n// module chunks = ","import gql from 'graphql-tag' // 引入graphql\nconst baseGql = {\n  ClusterView: gql`query ClusterView {\n    clusterView{\n      leaderAddr\n      volumeCount\n      metaPartitionCount\n      dataPartitionCount\n      serverCount\n      disableAutoAlloc\n    }\n  }`,\n  topNUser: gql`query TopNUser($n:int32) {\n    topNUser(n:$n){\n      name\n      size\n      ratio\n    }\n  }`,\n  dataNode: gql`query Query($queryTotal:String, $queryUsed:String,) {\n    total:Query(query:$queryTotal)\n    used:Query(query:$queryUsed)\n  }`,\n  rangeQuery: gql`query RangeQuery($queryTotal:String, $queryUsed:String, $start:uint32, $end:uint32,$step:uint32) {\n    total:RangeQuery(query:$queryTotal, start:$start, end:$end,step:$step),\n    used:RangeQuery(query:$queryUsed, start:$start, end:$end,step:$step)\n  }`,\n  rangeVolQuery: gql`query RangeQuery($query:String, $start:uint32, $end:uint32,$step:uint32) {\n#    total:RangeQuery(query:$query, start:$start, end:$end,step:$step),\n    RangeQuery(query:$query, start:$start, end:$end,step:$step)\n  }`,\n  queryUserList: gql`query ListUserInfo {\n    listUserInfo{\n      user_id\n      user_type\n      userStatistical{\n        data\n        dataPartitionCount\n        metaPartitionCount\n        volumeCount\n      }\n    }\n  }`\n}\n\nexport default baseGql\n\n\n\n// WEBPACK FOOTER //\n// ./src/graphql/overview.js"],"sourceRoot":""}