{"version":3,"sources":["webpack:///./src/graphql/alarm.js","webpack:///src/views/alarm.vue","webpack:///./src/views/alarm.vue?2300","webpack:///./src/views/alarm.vue"],"names":["baseGql","queryAlarmList","gql","_templateObject","clusterView","_templateObject2","views_alarm","name","data","clusterName","storageLists","resData","loading","page","pageSizes","pageNo","pageSize","totalRecord","totalPage","resLists","signUrlDialog","alarmInfo","detailDialog","methods","showDetail","val","this","handleSizeChange","handleCurrentChange","start","end","slice","queryList","_this","that","apollo","query","url","cluster","alarm","size","then","res","code","$message","error","message","alarmList","length","catch","console","log","queryClusterView","_this2","mounted","selectortype_template_index_0_src_views_alarm","render","_vm","_h","$createElement","_c","_self","staticClass","_v","directives","rawName","value","expression","staticStyle","width","attrs","prop","label","scopedSlots","_u","key","fn","scope","_s","on","click","$event","row","detail","page-sizes","page-size","layout","total","size-change","current-change","title","visible","update:visible","gutter","span","hostname","time","_e","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/11.0d156d6ecd557516c64f.js","sourcesContent":["import gql from 'graphql-tag' // 引入graphql\nconst baseGql = {\n  queryAlarmList: gql`query AlarmList($size:int32) {\n    alarmList(size:$size){\n      detail\n      hostname\n      key\n      time\n      type\n      value\n    }\n  }`,\n  clusterView: gql`query clusterView{\n    clusterView{\n        name\n      }\n    }`\n}\n\nexport default baseGql\n\n\n\n// WEBPACK FOOTER //\n// ./src/graphql/alarm.js","<template>\n  <div class=\"cluster alarm\">\n    <h3>Alarm Info</h3>\n    <div class=\"data-block\" v-loading=\"resData.loading\">\n      <el-table\n        :data=\"resData.resLists\"\n        style=\"width: 100%\">\n        <!--<el-table-column-->\n          <!--label=\"\"-->\n          <!--width=\"180\">-->\n          <!--<template slot-scope=\"scope\">-->\n            <!--&lt;!&ndash;<i class=\"new-icon\"></i>&ndash;&gt;-->\n            <!--<i v-if=\"scope.row.type === 1\" class=\"new-icon\"></i>-->\n          <!--</template>-->\n        <!--</el-table-column>-->\n        <el-table-column\n          prop=\"\"\n          label=\"Cluster ID\"\n          width=\"180\">\n          <template slot-scope=\"scope\">\n            {{clusterName}}\n          </template>\n        </el-table-column>\n        <el-table-column\n          prop=\"detail\"\n          label=\"Alarm\">\n          <template slot-scope=\"scope\">\n          <!--<i class=\"new-icon\"></i>-->\n            <a @click=\"showDetail(scope.row)\">{{scope.row.detail}}</a>\n          </template>\n        </el-table-column>\n        <el-table-column\n          prop=\"hostname\"\n          label=\"Host\">\n        </el-table-column>\n        <el-table-column\n          prop=\"time\"\n          label=\"Time\">\n        </el-table-column>\n      </el-table>\n      <div class=\"clearfix mt20\">\n        <el-pagination\n          class=\"fr\"\n          @size-change=\"handleSizeChange\"\n          @current-change=\"handleCurrentChange\"\n          :page-sizes=\"resData.page.pageSizes\"\n          :page-size=\"resData.page.pageSize\"\n          layout=\"sizes, prev, pager, next\"\n          :total=\"resData.page.totalRecord\">\n        </el-pagination>\n        <span class=\"fr page-tips pr10\">Each page shows</span>\n      </div>\n    </div>\n    <el-dialog\n      title=\"Alarm info\"\n      :visible.sync=\"detailDialog\"\n      width=\"35%\">\n      <div v-if=\"alarmInfo\">\n        <el-row :gutter=\"20\" class=\"mb20\">\n          <el-col :span=\"12\">\n            <span class=\"alarm-key mr10\">Cluster ID:</span><span>{{clusterName}}</span>\n          </el-col>\n          <el-col :span=\"12\">\n            <span class=\"alarm-key mr10\">Host:</span><span>{{alarmInfo.hostname}}</span>\n          </el-col>\n        </el-row>\n        <el-row class=\"mb20\">\n          <span class=\"alarm-key mr10\">Time:</span><span>{{alarmInfo.time}}</span>\n        </el-row>\n        <p class=\"mb20\">{{alarmInfo.detail}}</p>\n      </div>\n    </el-dialog>\n  </div>\n</template>\n\n<script>\nimport baseGql from '../graphql/alarm'\nexport default {\n  name: 'alarm',\n  data () {\n    return {\n      clusterName: null,\n      storageLists: [],\n      resData: {\n        loading: true,\n        page: {\n          pageSizes: [10, 20, 30, 40],\n          pageNo: 1,\n          pageSize: 10,\n          totalRecord: 0,\n          totalPage: 1\n        },\n        resLists: []\n      },\n      signUrlDialog: false,\n      alarmInfo: null,\n      detailDialog: false\n    }\n  },\n  methods: {\n    showDetail (val) {\n      this.alarmInfo = val\n      this.detailDialog = true\n    },\n    handleSizeChange (val) {\n      this.resData.page.pageSize = val\n      this.resData.page.pageNo = 1\n      this.handleCurrentChange(1)\n    },\n    handleCurrentChange (val) {\n      this.resData.page.pageNo = val\n      const start = (val - 1) * this.resData.page.pageSize\n      const end = val * this.resData.page.pageSize\n      this.resData.resLists = this.storageLists.slice(start, end)\n    },\n    queryList () {\n      const that = this\n      that.resData.loading = true\n      const variables = {\n        size: 1000\n      }\n      this.apollo.query(this.url.cluster, baseGql.queryAlarmList, variables).then((res) => {\n        that.resData.loading = false\n        if (!res.code) {\n          const data = res.data.alarmList\n          this.storageLists = data\n          this.resData.page.totalRecord = data.length\n          this.handleCurrentChange(1)\n        } else {\n          this.$message.error(res.message)\n        }\n      }).catch((error) => {\n        that.resData.loading = false\n        console.log(error)\n      })\n    },\n    queryClusterView () {\n      const that = this\n      const variables = {}\n      this.apollo.query(this.url.cluster, baseGql.clusterView, variables).then((res) => {\n        that.resData.loading = false\n        if (!res.code) {\n          const data = res.data.clusterView\n          this.clusterName = data.name\n        } else {\n          this.$message.error(res.message)\n        }\n      }).catch((error) => {\n        console.log(error)\n      })\n    }\n  },\n  mounted () {\n    this.queryClusterView()\n    this.queryList()\n  }\n}\n</script>\n\n<style scoped>\n.alarm h3{\n  line-height: 16px;\n  font-family: Helvetica;\n  font-weight: normal;\n  font-size: 13px;\n  color: rgba(51,51,51,1);\n  margin-bottom: 20px;\n}\n  .alarm .new-icon{\n    width: 7px;\n    height: 7px;\n    background: rgba(0,158,255,1);\n    border-radius: 7px;\n  }\n  .alarm-key{\n    font-weight: bold;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/alarm.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"cluster alarm\"},[_c('h3',[_vm._v(\"Alarm Info\")]),_vm._v(\" \"),_c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.resData.loading),expression:\"resData.loading\"}],staticClass:\"data-block\"},[_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.resData.resLists}},[_c('el-table-column',{attrs:{\"prop\":\"\",\"label\":\"Cluster ID\",\"width\":\"180\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\"\\n          \"+_vm._s(_vm.clusterName)+\"\\n        \")]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"detail\",\"label\":\"Alarm\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('a',{on:{\"click\":function($event){return _vm.showDetail(scope.row)}}},[_vm._v(_vm._s(scope.row.detail))])]}}])}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"hostname\",\"label\":\"Host\"}}),_vm._v(\" \"),_c('el-table-column',{attrs:{\"prop\":\"time\",\"label\":\"Time\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"clearfix mt20\"},[_c('el-pagination',{staticClass:\"fr\",attrs:{\"page-sizes\":_vm.resData.page.pageSizes,\"page-size\":_vm.resData.page.pageSize,\"layout\":\"sizes, prev, pager, next\",\"total\":_vm.resData.page.totalRecord},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}}),_vm._v(\" \"),_c('span',{staticClass:\"fr page-tips pr10\"},[_vm._v(\"Each page shows\")])],1)],1),_vm._v(\" \"),_c('el-dialog',{attrs:{\"title\":\"Alarm info\",\"visible\":_vm.detailDialog,\"width\":\"35%\"},on:{\"update:visible\":function($event){_vm.detailDialog=$event}}},[(_vm.alarmInfo)?_c('div',[_c('el-row',{staticClass:\"mb20\",attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"span\":12}},[_c('span',{staticClass:\"alarm-key mr10\"},[_vm._v(\"Cluster ID:\")]),_c('span',[_vm._v(_vm._s(_vm.clusterName))])]),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":12}},[_c('span',{staticClass:\"alarm-key mr10\"},[_vm._v(\"Host:\")]),_c('span',[_vm._v(_vm._s(_vm.alarmInfo.hostname))])])],1),_vm._v(\" \"),_c('el-row',{staticClass:\"mb20\"},[_c('span',{staticClass:\"alarm-key mr10\"},[_vm._v(\"Time:\")]),_c('span',[_vm._v(_vm._s(_vm.alarmInfo.time))])]),_vm._v(\" \"),_c('p',{staticClass:\"mb20\"},[_vm._v(_vm._s(_vm.alarmInfo.detail))])],1):_vm._e()])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-c10b4730\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/views/alarm.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-c10b4730\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./alarm.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./alarm.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./alarm.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-c10b4730\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./alarm.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-c10b4730\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/alarm.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}